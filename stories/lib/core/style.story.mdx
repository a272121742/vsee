import { Story, Preview, Meta, Props } from '@storybook/addon-docs/blocks';

<Meta title="框架|核心（Core）/样式（style）" />

# 样式

`vsee`使用的是`less`作为`precss`技术，结合`ant-design-vue`可以很方便、直接了当的开发出好看的界面样式。在平台中，内置了三种样式：

1. `ant-design-vue.less`组件样式
2. `theme.less`全局样式
3. `*.vue scoped less`视图样式

这三种样式是至上而下进行加载的。

## Global Less

系统内置了全局样式定义，名称为`theme.less`，被放置在项目的根目录下，以`aqs`项目为例：

```sh
- aqs
  - order           // 订单业务模块
  - layout          // 布局模块
  - bootstra.js     // 前置引导模块
  - main.js         // 主入口
  - config.js       // 应用配置
  - theme.less      // 全局样式文件
```

一个`theme.less`的案例如下：

```less
@primary-color: #0097E0; // 全局主色
@link-color: #0097E0; // 链接色
@success-color: #B7D342; // 成功色
@warning-color: #FABE00; // 警告色
@error-color: #D1291A; // 错误色
@font-size-base: 14px; // 主字号
@heading-color: rgba(0, 0, 0, .85); // 标题色
@text-color: rgba(0, 0, 0, .65); // 主文本色
@text-color-secondary: rgba(0, 0, 0, .45); // 次文本色
@disabled-color: rgba(0, 0, 0, .25); // 失效色
@border-radius-base: 4px; // 组件/浮层圆角
@border-color-base: #d9d9d9; // 边框色
@box-shadow-base: 0 2px 8px rgba(0, 0, 0, .15); // 浮层阴影

.col-layout-form.ant-form-horizontal, 
.col-layout-form.ant-form-inline {
  .ant-form-item {
    display: flex;
    margin-bottom: 8px;
    .ant-form-item-label {
      flex: 1;
    }
    .ant-form-item-control-wrapper {
      flex: 2.5;
    }
  }
} 
```

对该文件需要有几点说明：

1. `theme.less`不是必须的，你甚至可以自己定义一个`global.less`放置在`common`文件夹中，然后在`bootstrap.js`或`main.js`文件中引入。但这样需要开发者自行引入，并且这样引入的文件不具备定义全局变量的特性；
2. `theme.less`案例中不难发现，上半部分可以定义`less常量`，下半部分可以修改`ant-design-vue`的嵌套样式。这也是我们为什么采用这种方式而不建议开发者自己引入的原因，`theme.less`中可以像正常`less`一样为其他组件提供全局的`less常量`；
3. `theme.less`的常量定义是处于`append`状态的，如上面提到的加载顺序，优先加载`ant-design-vue.less`，再加载`theme.less`，最后加载`vue scoped less`，因此`theme.less`除了给后面的`vue scoped less`提供常量支持，还可以覆盖`ant-design-vue.less`所定义的样式，做到主题可定制；
4. `theme.less`无`scoped`范围，是全局的，因此开发过程中需要谨慎使用。这就需要开发者有系统性的开发技巧，能对整体样式进行宏观把控；
5. `theme.less`是可拔插的，你甚至可以删除掉这个文件，也不会对程序产生错误。除非你在`*.vue`文件中引入了里面的变量，会因为变量未定义而报错。

> 注意：过去我们是定义的`theme.js`文件（现在废除这种写法），这个文件维护起来非常不友好，即没有实时性（修改之后要重新运行项目），也缺乏灵活性（只能以`key-value`形式定义变量）。所以我们对这种方式进行了改进，让开发者进行全局样式的制定。